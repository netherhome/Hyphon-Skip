<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hyphon <span style="color:red;">Skip</span></title>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<style>
  body { font-family: 'Poppins', sans-serif; margin:0; padding:0; background:#fff; text-align:center; color:#333; }
  header { display:flex; justify-content:space-around; background:#f4f4f4; padding:10px; position:sticky; top:0; z-index:10; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
  header button { flex:1; margin:5px; padding:15px; font-size:18px; border:none; border-radius:10px; cursor:pointer; transition: transform 0.2s ease; }
  header button:hover { transform: scale(1.05); }
  #homeBtn { background: #ffcc00; } #scrollBtn { background:#ff6666; } #loginBtn { background:#00c2ff; color:white;}
  .screen { display:none; padding:20px; }
  .active { display:block; }
  .card { background:#fafafa; border-radius:15px; padding:20px; margin:20px auto; width:80%; max-width:400px; box-shadow:0 4px 12px rgba(0,0,0,0.15); font-size:20px; transition: transform 0.3s ease, opacity 0.3s ease; }
  .bigBtn { width:45%; margin:10px; padding:20px; font-size:22px; border:none; border-radius:15px; cursor:pointer; transition: transform 0.2s ease; }
  .bigBtn:hover { transform:scale(1.05); }
  #passBtn { background:#ff4444; color:white; } #likeBtn { background:#44cc44; color:white; }
  .stats { font-size:16px; color:#555; margin-top:10px; }
  #loginScreen { display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column; }
  #loginScreen input, #loginScreen button { font-size:20px; padding:15px; margin:10px; border-radius:10px; border:none; }
</style>
</head>
<body>

<div id="loginScreen">
  <h1><span style="color:black;background:white;padding:5px;border-radius:5px;">Hyphon</span> <span style="color:red;">Skip</span></h1>
  <input id="usernameInput" placeholder="Enter username...">
  <button id="loginBtn">Login</button>
</div>

<div id="app" style="display:none;">
  <header>
    <button id="homeBtn">Home</button>
    <button id="scrollBtn">Scroll</button>
  </header>

  <div id="homeScreen" class="screen active">
    <h2>Welcome, <span id="userDisplay"></span>!</h2>
    <button onclick="showCreateCard()">+ Create Card</button>
    <div id="myCards"></div>
  </div>

  <div id="scrollScreen" class="screen">
    <h2>Scroll Cards</h2>
    <div id="cardContainer"></div>
    <div>
      <button id="passBtn" class="bigBtn">Pass</button>
      <button id="likeBtn" class="bigBtn">Like!</button>
    </div>
  </div>
</div>

<script>
  // --- Firebase Setup ---
  const firebaseConfig = {
    apiKey: "AIzaSyDIMxctRr3tYxb90o_dQRa4UArEr5uePYE",
    authDomain: "hyphonskip.firebaseapp.com",
    databaseURL: "https://hyphonskip-default-rtdb.firebaseio.com",
    projectId: "hyphonskip",
    storageBucket: "hyphonskip.firebasestorage.app",
    messagingSenderId: "665576046305",
    appId: "1:665576046305:web:f7b7a37a7be1d0c5b581a0"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let currentUser = null;
  let cards = [];
  let currentIndex = 0;

  // --- Login ---
  document.getElementById('loginBtn').onclick = () => {
    const username = document.getElementById('usernameInput').value.trim();
    if (!username) return alert("Enter a username!");
    currentUser = username;
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    document.getElementById('userDisplay').innerText = username;
    loadMyCards();
    loadCards();
  };

  // --- Navigation ---
  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }
  document.getElementById('homeBtn').onclick = () => showScreen('homeScreen');
  document.getElementById('scrollBtn').onclick = () => showScreen('scrollScreen');

  // --- Create Card ---
  function showCreateCard() {
    const text = prompt("Enter card text:");
    if (!text) return;
    db.ref("cards").push({ text, username: currentUser, likes:0, views:0, created: Date.now() });
    loadMyCards();
  }

  function loadMyCards() {
    db.ref("cards").orderByChild("username").equalTo(currentUser).on("value", snap => {
      const myCardsDiv = document.getElementById("myCards");
      myCardsDiv.innerHTML = "";
      snap.forEach(c => {
        const card = c.val();
        myCardsDiv.innerHTML += `<div class="card">${card.text}
          <div class="stats">üëç ${card.likes} | üëÄ ${card.views}</div></div>`;
      });
    });
  }

  // --- Scroll Cards ---
  function loadCards() {
    db.ref("cards").on("value", snap => {
      cards = [];
      snap.forEach(c => {
        const card = c.val();
        card.id = c.key;
        if(card.username !== currentUser) cards.push(card);
      });
      currentIndex = 0;
      showCard();
    });
  }

  function showCard() {
    const container = document.getElementById("cardContainer");
    container.innerHTML = "";
    if(currentIndex >= cards.length){
      container.innerHTML = "<p>No more cards!</p>";
      return;
    }
    const card = cards[currentIndex];
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<p>${card.text}</p><div class="stats">üëç ${card.likes} | üëÄ ${card.views}</div>`;
    container.appendChild(div);
    // Increment views safely
    db.ref("cards/"+card.id+"/views").transaction(v => (v||0)+1);
  }

  document.getElementById("passBtn").onclick = () => { currentIndex++; showCard(); };
  document.getElementById("likeBtn").onclick = () => {
    const card = cards[currentIndex];
    db.ref("cards/"+card.id+"/likes").transaction(l => (l||0)+1);
    currentIndex++; showCard();
  };
</script>

</body>
</html>
